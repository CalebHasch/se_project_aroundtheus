!function(){"use strict";class e{constructor(e,t){this.settingsObj=e,this.form=t,this._submitButton=this.form.querySelector(e.submitButtonSelector),this._inputList=Array.from(this.form.querySelectorAll(e.inputSelector))}enableValidation(){this._inputList.forEach((e=>{this._addInputEvents(e)}))}_addInputEvents(e){e.addEventListener("input",(()=>{this._checkValidity(e),this.toggleSubmitButton()}))}_checkValidity(e){const t=e.nextSibling.nextSibling;e.validity.valid?this._hideError(t,e):this._showError(t,e)}resetValidation(){this.toggleSubmitButton(),this._inputList.forEach((e=>{this._hideError(e.nextSibling.nextSibling,e)}))}_showError(e,t){const i=t.validationMessage;t.classList.add(this.settingsObj.inputErrorClass),e.textContent=i}_hideError(e,t){t.classList.remove(this.settingsObj.inputErrorClass),e.textContent=""}toggleSubmitButton(){this._hasInvalidInput(this._inputList)?(this._submitButton.classList.add(this.settingsObj.inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this.settingsObj.inactiveButtonClass),this._submitButton.disabled=!1)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}}class t{constructor(e,t,i,r,o){this.image=e.link,this.text=e.name,this.id=e._id,this.isLiked=e.isLiked,this.cardTemplate=document.querySelector(t).content,this.handleImageClick=i,this.handleTrashClick=r,this.handleLikeClick=o,this._cardElement=this.cardTemplate.querySelector(".locations__card").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._deleteButton=this._cardElement.querySelector(".card__delete-icon"),this._likeButton=this._cardElement.querySelector(".card__like-icon")}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this.handleLikeClick(this),this._checkedIfLiked()})),this._deleteButton.addEventListener("click",(()=>{this.handleTrashClick(this)})),this._cardImage.addEventListener("click",this.handleImageClick)}_checkedIfLiked=()=>{this.isLiked?this._likeButton.classList.add("card__like-icon_clicked"):this._likeButton.classList.remove("card__like-icon_clicked")};_removeCard=()=>{this._cardElement.remove()};createCard(){return this._setEventListeners(),this._checkedIfLiked(),this._cardImage.src=this.image,this._cardImage.alt=this.text,this._cardTitle.textContent=this.text,this._cardElement}}class i{constructor(e){this.modal=document.querySelector(e),this.currentId="",this.removeHandler=""}openModal(e){this.modal.classList.add("modal_opened"),this.modal.addEventListener("click",this._handleCloseEvent),document.addEventListener("keydown",this._handleCloseEvent)}closeModal(){this.modal.classList.remove("modal_opened"),this.modal.removeEventListener("click",this._handleCloseEvent),document.removeEventListener("keydown",this._handleCloseEvent)}_handleCloseEvent=e=>{(e.target.classList.contains("modal")||"Escape"==e.key)&&this.closeModal()};setEventListeners(){this.modal.querySelector(".modal__close").addEventListener("click",(()=>this.closeModal()))}}class r extends i{constructor(e,t){super(e),this.submit=t,this.form=this.modal.querySelector(".form"),this.inputs=this.form.querySelectorAll(".form__input"),this.button=this.form.querySelector(".form__submit-button"),this.buttonText=this.button.textContent}renderLoading(e){e?"form-delete-card"===this.form.id?this.button.textContent="Deleting...":this.button.textContent="Saving...":this.button.textContent=this.buttonText}setUpDeleteModal=e=>{this.currentId=e.id,this.removeHandler=e._removeCard,super.openModal()};_getInputValues(){const e={};return this.inputs.forEach((t=>{t.name,e[t.name]=t.value})),e}setInputs(e){this.inputs.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this.form.addEventListener("submit",(e=>{e.preventDefault(),this.renderLoading(!0),new Promise((t=>t(this.submit(e,this._getInputValues()))))}))}}const o=new class{constructor(e){this._authorization="fd5203a5-1f57-4428-b210-42e565daa250"}getUserInfo(){return fetch("https://around-api.en.tripleten-services.com/v1/users/me",{headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then((e=>(e.description=e.about,e))).catch((e=>console.error(e)))}updateUserInfo(e){let{name:t,description:i}=e;return fetch("https://around-api.en.tripleten-services.com/v1/users/me",{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:i})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}updateUserImage(e){let{avatar:t}=e;return fetch("https://around-api.en.tripleten-services.com/v1/users/me/avatar",{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getInitialCards(){return fetch("https://around-api.en.tripleten-services.com/v1/cards",{headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then((e=>e)).catch((e=>console.error(e)))}postCard(e){let{name:t,link:i}=e;return fetch("https://around-api.en.tripleten-services.com/v1/cards",{method:"POST",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:i})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}deleteCard(e){return fetch(`https://around-api.en.tripleten-services.com/v1/cards/${e}`,{method:"DELETE",headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}likeCard(e){return fetch(`https://around-api.en.tripleten-services.com/v1/cards/${e}/likes`,{method:"PUT",headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}dislikeCard(e){return fetch(`https://around-api.en.tripleten-services.com/v1/cards/${e}/likes`,{method:"DELETE",headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getAll(){return Promise.all([this.getUserInfo(),this.getInitialCards()]).then((e=>e))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"fd5203a5-1f57-4428-b210-42e565daa250","Content-Type":"application/json"}}),n={formSelector:".form",fieldSelector:".form__field",inputSelector:".form__input",errorSelector:".form__error",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_invalid"},s=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),d=document.querySelector(".profile__pic"),l=document.forms["form-edit-profile"],c=document.forms["form-add-card"],h=document.forms["form-profile-pic"],u=document.querySelector(".location__image"),m=document.querySelector(".location__title"),p={cardPopup:new r("#add-card-modal",(function(e,t){let{title:i,link:r}=t;const n={name:i,link:r};o.postCard(n).then((t=>(f.addItem(t,"prepend"),e.target.reset(),v.cardFormValidation.toggleSubmitButton(),p.cardPopup.closeModal(),p.cardPopup.renderLoading(),t))).catch((e=>console.error(e)))})),profilePopup:new r("#edit-profile-modal",(function(e,t){let{name:i,description:r}=t;o.updateUserInfo({name:i,description:r}).then((()=>{_.setUserInfo({name:i,description:r}),p.profilePopup.closeModal(),p.profilePopup.renderLoading()})).catch((e=>console.error(e)))})),deleteCardPopup:new r("#delete-card-modal",(function(){o.deleteCard(this.currentId).then((()=>{p.deleteCardPopup.removeHandler(),p.deleteCardPopup.closeModal(),p.deleteCardPopup.renderLoading()})).catch((e=>console.error(e)))})),profilePicPopup:new r("#profile-pic-modal",(function(e,t){let{avatar:i}=t;o.updateUserImage({avatar:i}).then((()=>{_.setUserImage({avatar:i}),p.profilePicPopup.closeModal(),p.profilePicPopup.renderLoading(),e.target.reset(),v.picFormValidation.toggleSubmitButton()})).catch((e=>console.error(e)))})),locationPopup:new class extends i{openModal=(e,t,i)=>{let{name:r,link:o}=e;t.src=o,t.alt=r,i.textContent=r,super.openModal()}}("#location-modal")},_=new class{constructor(e,t){let{nameSelector:i,descriptionSelector:r}=e;this.name=document.querySelector(i),this.description=document.querySelector(r),this.image=t}getUserInfo(){return{name:this.name.textContent,description:this.description.textContent}}setUserInfo(e){let{name:t,description:i}=e;this.name.textContent=t,this.description.textContent=i}setUserImage(e){let{avatar:t}=e;this.image.src=t}}({nameSelector:".profile__name",descriptionSelector:".profile__subtitle"},d),f=new class{constructor(e,t){let{renderer:i}=e;this.renderer=i,this.container=document.querySelector(t)}renderItems(e){e.forEach((e=>{this.addItem(e)}))}addItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";const i=this.renderer(e);this.container[t](i)}}({renderer:function(e){return new t(e,"#locations__card",(()=>{p.locationPopup.openModal(e,u,m)}),p.deleteCardPopup.setUpDeleteModal,k).createCard()}},".locations"),v={editFormValidation:new e(n,l),cardFormValidation:new e(n,c),picFormValidation:new e(n,h)};for(let e in p)p[e].setEventListeners();for(let e in v)v[e].enableValidation();function k(e){e.isLiked?o.dislikeCard(e.id).then((()=>{e.isLiked=!1})).catch((e=>console.error(e))):o.likeCard(e.id).then((()=>{e.isLiked=!0})).catch((e=>console.error(e)))}o.getAll().then((e=>(_.setUserInfo(e[0]),_.setUserImage(e[0]),e))).then((e=>{p.profilePopup.setInputs(_.getUserInfo()),f.renderItems(e[1])})),s.addEventListener("click",(function(){p.profilePopup.openModal(),v.editFormValidation.resetValidation()})),a.addEventListener("click",(function(){p.cardPopup.openModal()})),d.addEventListener("click",(function(){p.profilePicPopup.openModal()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU9nQyxHQUFPdEcsb0JBR2hCLElBQUssSUFBSTdFLEtBQVEwSixFQUNmQSxFQUFlMUosR0FBTVMsbUJBaUZ2QixTQUFTd0ssRUFBV0QsR0FDZEEsRUFBS2pJLFFBQ1BpRCxFQUFBQSxZQUNlZ0YsRUFBS25JLElBQ2pCMEQsTUFBSyxLQUNKeUUsRUFBS2pJLFNBQVUsQ0FBSyxJQUVyQmdFLE9BQU9DLEdBQVFDLFFBQVFDLE1BQU1GLEtBRWhDaEIsRUFBQUEsU0FDWWdGLEVBQUtuSSxJQUNkMEQsTUFBSyxLQUNKeUUsRUFBS2pJLFNBQVUsQ0FBSSxJQUVwQmdFLE9BQU9DLEdBQVFDLFFBQVFDLE1BQU1GLElBRXBDLENBOUZBaEIsRUFBQUEsU0FFR08sTUFBTW5FLElBQ0x5SCxFQUFTQyxZQUFZMUgsRUFBSyxJQUMxQnlILEVBQVNJLGFBQWE3SCxFQUFLLElBQ3BCQSxLQUVSbUUsTUFBTW5FLElBQ0wrRyxFQUFPUyxhQUFhakUsVUFBVWtFLEVBQVMxRCxlQUN2Q29ELEVBQVlrQixZQUFZckksRUFBSyxHQUFHLElBd0ZwQ3NHLEVBQVc3SCxpQkFBaUIsU0FBUyxXQUNuQ3NJLEVBQU9TLGFBQWF4RixZQUNwQnNGLEVBQWV3QixtQkFBbUI1SixpQkFDcEMsSUFHQXFILEVBQVU5SCxpQkFBaUIsU0FBUyxXQUNsQ3NJLEVBQU9DLFVBQVVoRixXQUNuQixJQUdBd0UsRUFBYS9ILGlCQUFpQixTQUFTLFdBQ3JDc0ksRUFBT2EsZ0JBQWdCNUYsV0FDekIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzT2JqLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5zZXR0aW5nc09iaiA9IHNldHRpbmdzT2JqO1xyXG4gICAgdGhpcy5mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgc2V0dGluZ3NPYmouc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbChzZXR0aW5nc09iai5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fYWRkSW5wdXRFdmVudHMoaW5wdXQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfYWRkSW5wdXRFdmVudHMoaW5wdXQpIHtcclxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICB0aGlzLnRvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gaW5wdXQubmV4dFNpYmxpbmcubmV4dFNpYmxpbmc7XHJcblxyXG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93RXJyb3IoZXJyb3JFbGVtZW50LCBpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlRXJyb3IoZXJyb3JFbGVtZW50LCBpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLnRvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQubmV4dFNpYmxpbmcubmV4dFNpYmxpbmcsIGlucHV0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dFcnJvcihlcnJvckVsZW1lbnQsIGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuXHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuc2V0dGluZ3NPYmouaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICB9XHJcblxyXG4gIF9oaWRlRXJyb3IoZXJyb3JFbGVtZW50LCBpbnB1dCkge1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzT2JqLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuc2V0dGluZ3NPYmouaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzT2JqLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlVHJhc2hDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICkge1xyXG4gICAgdGhpcy5pbWFnZSA9IGRhdGEubGluaztcclxuICAgIHRoaXMudGV4dCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuaWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcclxuICAgIHRoaXMuY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkU2VsZWN0b3IpLmNvbnRlbnQ7XHJcbiAgICB0aGlzLmhhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5oYW5kbGVUcmFzaENsaWNrID0gaGFuZGxlVHJhc2hDbGljaztcclxuICAgIHRoaXMuaGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLmNhcmRUZW1wbGF0ZVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5sb2NhdGlvbnNfX2NhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtaWNvblwiKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtaWNvblwiKTtcclxuICB9XHJcblxyXG4gIC8vZXZlbnQgbGlzdGVuZXJzIGZvciBjYXJkc1xyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVMaWtlQ2xpY2sodGhpcyk7XHJcbiAgICAgIHRoaXMuX2NoZWNrZWRJZkxpa2VkKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmhhbmRsZVRyYXNoQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVJbWFnZUNsaWNrKTtcclxuICB9XHJcblxyXG4gIF9jaGVja2VkSWZMaWtlZCA9ICgpID0+IHtcclxuICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1pY29uX2NsaWNrZWRcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWljb25fY2xpY2tlZFwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfcmVtb3ZlQ2FyZCA9ICgpID0+IHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gIH07XHJcblxyXG4gIC8vIGNyZWF0ZSBhIG5ldyBjYXJkXHJcbiAgY3JlYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9jaGVja2VkSWZMaWtlZCgpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLmltYWdlO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMudGV4dDtcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMudGV4dDtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuY3VycmVudElkID0gXCJcIjtcclxuICAgIHRoaXMucmVtb3ZlSGFuZGxlciA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBvcGVuTW9kYWwoY2FyZE9iaikge1xyXG4gICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xvc2VFdmVudCk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVDbG9zZUV2ZW50KTtcclxuICB9XHJcblxyXG4gIGNsb3NlTW9kYWwoKSB7XHJcbiAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLm1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbG9zZUV2ZW50KTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUNsb3NlRXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNsb3NlRXZlbnQgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpIHx8IGUua2V5ID09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG5cclxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZU1vZGFsKCkpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0RnVuY3Rpb24pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5zdWJtaXQgPSBzdWJtaXRGdW5jdGlvbjtcclxuICAgIHRoaXMuZm9ybSA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgdGhpcy5pbnB1dHMgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICAgIHRoaXMuYnV0dG9uID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiKTtcclxuICAgIHRoaXMuYnV0dG9uVGV4dCA9IHRoaXMuYnV0dG9uLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgaWYgKHRoaXMuZm9ybS5pZCA9PT0gXCJmb3JtLWRlbGV0ZS1jYXJkXCIpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5idXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0VXBEZWxldGVNb2RhbCA9IChjYXJkT2JqKSA9PiB7XHJcbiAgICB0aGlzLmN1cnJlbnRJZCA9IGNhcmRPYmouaWQ7XHJcbiAgICB0aGlzLnJlbW92ZUhhbmRsZXIgPSBjYXJkT2JqLl9yZW1vdmVDYXJkO1xyXG4gICAgc3VwZXIub3Blbk1vZGFsKCk7XHJcbiAgfTtcclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXR2YWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHByb3BlcnR5TmFtZSA9IGlucHV0Lm5hbWU7XHJcbiAgICAgIGlucHV0dmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dHZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldElucHV0cyhpbnB1dFZhbHVlcykge1xyXG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXNvbHZlKHRoaXMuc3VibWl0KGUsIHRoaXMuX2dldElucHV0VmFsdWVzKCkpKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9hdXRob3JpemF0aW9uID0gXCJmZDUyMDNhNS0xZjU3LTQ0MjgtYjIxMC00MmU1NjVkYWEyNTBcIjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvdXNlcnMvbWVcIiwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcmVzLmRlc2NyaXB0aW9uID0gcmVzLmFib3V0O1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS91c2Vycy9tZVwiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGRlc2NyaXB0aW9uLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VySW1hZ2UoeyBhdmF0YXIgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKFxyXG4gICAgICBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL3VzZXJzL21lL2F2YXRhclwiLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgYXZhdGFyOiBhdmF0YXIsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH1cclxuICAgICkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL2NhcmRzXCIsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gIH1cclxuXHJcbiAgcG9zdENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL2NhcmRzXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGxpbms6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXHJcbiAgICAgIGBodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9jYXJkcy8ke2NhcmRJZH1gLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXHJcbiAgICAgIGBodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGlzbGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXHJcbiAgICAgIGBodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxsKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKS50aGVuKFxyXG4gICAgICAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImZkNTIwM2E1LTFmNTctNDQyOC1iMjEwLTQyZTU2NWRhYTI1MFwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcbiIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5jb25zdCB2YWxpZGF0aW9uT2JqID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxyXG4gIGZpZWxkU2VsZWN0b3I6IFwiLmZvcm1fX2ZpZWxkXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBlcnJvclNlbGVjdG9yOiBcIi5mb3JtX19lcnJvclwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXQtYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X2ludmFsaWRcIixcclxufTtcclxuXHJcbi8vIGRlY2xhcmUgYnV0dG9uc1xyXG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY1wiKTtcclxuXHJcbi8vZGVjbGFyZSBtb2RhbCBlbGVtZW50c1xyXG5jb25zdCBlZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiZm9ybS1lZGl0LXByb2ZpbGVcIl07XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJmb3JtLWFkZC1jYXJkXCJdO1xyXG5jb25zdCBwcm9maWxlUGljRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiZm9ybS1wcm9maWxlLXBpY1wiXTtcclxuY29uc3QgbW9kYWxJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9jYXRpb25fX2ltYWdlXCIpO1xyXG5jb25zdCBtb2RhbFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2NhdGlvbl9fdGl0bGVcIik7XHJcblxyXG5leHBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICB2YWxpZGF0aW9uT2JqLFxyXG4gIGVkaXRCdXR0b24sXHJcbiAgYWRkQnV0dG9uLFxyXG4gIHByb2ZpbGVJbWFnZSxcclxuICBwcm9maWxlUGljRm9ybSxcclxuICBlZGl0Rm9ybSxcclxuICBhZGRDYXJkRm9ybSxcclxuICBtb2RhbEltYWdlLFxyXG4gIG1vZGFsVGl0bGUsXHJcbn07XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHZhbGlkYXRpb25PYmosXHJcbiAgZWRpdEJ1dHRvbixcclxuICBhZGRCdXR0b24sXHJcbiAgcHJvZmlsZUltYWdlLFxyXG4gIHByb2ZpbGVQaWNGb3JtLFxyXG4gIGVkaXRGb3JtLFxyXG4gIGFkZENhcmRGb3JtLFxyXG4gIG1vZGFsSW1hZ2UsXHJcbiAgbW9kYWxUaXRsZSxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5jb25zdCBwb3B1cHMgPSB7XHJcbiAgY2FyZFBvcHVwOiBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCByZW5kZXJOZXdDYXJkKSxcclxuICBwcm9maWxlUG9wdXA6IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiLCBlZGl0UHJvZmlsZSksXHJcbiAgZGVsZXRlQ2FyZFBvcHVwOiBuZXcgUG9wdXBXaXRoRm9ybShcIiNkZWxldGUtY2FyZC1tb2RhbFwiLCBkZWxldGVDYXJkKSxcclxuICBwcm9maWxlUGljUG9wdXA6IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGUtcGljLW1vZGFsXCIsIGVkaXRQcm9maWxlUGljKSxcclxuICBsb2NhdGlvblBvcHVwOiBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjbG9jYXRpb24tbW9kYWxcIiksXHJcbn07XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcclxuICB7XHJcbiAgICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICAgIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXHJcbiAgfSxcclxuICBwcm9maWxlSW1hZ2VcclxuKTtcclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbih7IHJlbmRlcmVyOiBjcmVhdGVDYXJkIH0sIFwiLmxvY2F0aW9uc1wiKTtcclxuXHJcbi8vIHZhbGlkYXRpb24gY2xhc3NcclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7XHJcbiAgZWRpdEZvcm1WYWxpZGF0aW9uOiBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uT2JqLCBlZGl0Rm9ybSksXHJcbiAgY2FyZEZvcm1WYWxpZGF0aW9uOiBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uT2JqLCBhZGRDYXJkRm9ybSksXHJcbiAgcGljRm9ybVZhbGlkYXRpb246IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25PYmosIHByb2ZpbGVQaWNGb3JtKSxcclxufTtcclxuXHJcbi8vIGluaXRhaWwgc2V0dXBcclxuZm9yIChsZXQgcG9wdXAgaW4gcG9wdXBzKSB7XHJcbiAgcG9wdXBzW3BvcHVwXS5zZXRFdmVudExpc3RlbmVycygpO1xyXG59XHJcblxyXG5mb3IgKGxldCBmb3JtIGluIGZvcm1WYWxpZGF0b3JzKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbZm9ybV0uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG59XHJcblxyXG5hcGlcclxuICAuZ2V0QWxsKClcclxuICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YVswXSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW1hZ2UoZGF0YVswXSk7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9KVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICBwb3B1cHMucHJvZmlsZVBvcHVwLnNldElucHV0cyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKGRhdGFbMV0pO1xyXG4gIH0pO1xyXG5cclxuLy8gZWRpdHMgdGhlIHVzZXIgcHJvZmlsZSBiYXNlZCBvZmYgZm9ybSBpbnB1dHNcclxuZnVuY3Rpb24gZWRpdFByb2ZpbGUoZSwgeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlVXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pO1xyXG4gICAgICBwb3B1cHMucHJvZmlsZVBvcHVwLmNsb3NlTW9kYWwoKTtcclxuICAgICAgcG9wdXBzLnByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVkaXRQcm9maWxlUGljKGUsIHsgYXZhdGFyIH0pIHtcclxuICBhcGlcclxuICAgIC51cGRhdGVVc2VySW1hZ2UoeyBhdmF0YXIgfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckltYWdlKHsgYXZhdGFyIH0pO1xyXG4gICAgICBwb3B1cHMucHJvZmlsZVBpY1BvcHVwLmNsb3NlTW9kYWwoKTtcclxuICAgICAgcG9wdXBzLnByb2ZpbGVQaWNQb3B1cC5yZW5kZXJMb2FkaW5nKCk7XHJcbiAgICAgIGUudGFyZ2V0LnJlc2V0KCk7XHJcbiAgICAgIGZvcm1WYWxpZGF0b3JzLnBpY0Zvcm1WYWxpZGF0aW9uLnRvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG59XHJcblxyXG4vLyByZW5kZXJzIGNhcmQgY3JlYXRlZCBieSB1c2VyXHJcbmZ1bmN0aW9uIHJlbmRlck5ld0NhcmQoZSwgeyB0aXRsZSwgbGluayB9KSB7XHJcbiAgY29uc3QgY2FyZERhdGEgPSB7IG5hbWU6IHRpdGxlLCBsaW5rIH07XHJcblxyXG4gIGFwaVxyXG4gICAgLnBvc3RDYXJkKGNhcmREYXRhKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShkYXRhLCBcInByZXBlbmRcIik7XHJcbiAgICAgIGUudGFyZ2V0LnJlc2V0KCk7XHJcbiAgICAgIGZvcm1WYWxpZGF0b3JzLmNhcmRGb3JtVmFsaWRhdGlvbi50b2dnbGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgcG9wdXBzLmNhcmRQb3B1cC5jbG9zZU1vZGFsKCk7XHJcbiAgICAgIHBvcHVwcy5jYXJkUG9wdXAucmVuZGVyTG9hZGluZygpO1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIFwiI2xvY2F0aW9uc19fY2FyZFwiLFxyXG4gICAgKCkgPT4ge1xyXG4gICAgICBwb3B1cHMubG9jYXRpb25Qb3B1cC5vcGVuTW9kYWwoY2FyZERhdGEsIG1vZGFsSW1hZ2UsIG1vZGFsVGl0bGUpO1xyXG4gICAgfSxcclxuICAgIHBvcHVwcy5kZWxldGVDYXJkUG9wdXAuc2V0VXBEZWxldGVNb2RhbCxcclxuICAgIHRvZ2dsZUxpa2VcclxuICApLmNyZWF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZUNhcmQoKSB7XHJcbiAgYXBpXHJcbiAgICAuZGVsZXRlQ2FyZCh0aGlzLmN1cnJlbnRJZClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgcG9wdXBzLmRlbGV0ZUNhcmRQb3B1cC5yZW1vdmVIYW5kbGVyKCk7XHJcbiAgICAgIHBvcHVwcy5kZWxldGVDYXJkUG9wdXAuY2xvc2VNb2RhbCgpO1xyXG4gICAgICBwb3B1cHMuZGVsZXRlQ2FyZFBvcHVwLnJlbmRlckxvYWRpbmcoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlTGlrZShjYXJkKSB7XHJcbiAgaWYgKGNhcmQuaXNMaWtlZCkge1xyXG4gICAgYXBpXHJcbiAgICAgIC5kaXNsaWtlQ2FyZChjYXJkLmlkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5pc0xpa2VkID0gZmFsc2U7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgICAgLmxpa2VDYXJkKGNhcmQuaWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLmlzTGlrZWQgPSB0cnVlO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuICB9XHJcbn1cclxuXHJcbi8vZXZlbnQgbGlzdGVuZXIgZm9yIHByb2ZpbGUgZWRpdCBmb3JtXHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBwb3B1cHMucHJvZmlsZVBvcHVwLm9wZW5Nb2RhbCgpO1xyXG4gIGZvcm1WYWxpZGF0b3JzLmVkaXRGb3JtVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG4vL2V2ZW50IGxpc3RlbmVyIGZvciBsb2NhdGlvbiBhZGQgZm9ybVxyXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBwb3B1cHMuY2FyZFBvcHVwLm9wZW5Nb2RhbCgpO1xyXG59KTtcclxuXHJcbi8vZXZlbnQgbGlzdGVuZXIgZm9yIHByb2ZpbGUgcGljIGZvcm1cclxucHJvZmlsZUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgcG9wdXBzLnByb2ZpbGVQaWNQb3B1cC5vcGVuTW9kYWwoKTtcclxufSk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgb3Blbk1vZGFsID0gKHsgbmFtZSwgbGluayB9LCBtb2RhbEltYWdlLCBtb2RhbFRpdGxlKSA9PiB7XHJcbiAgICBtb2RhbEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICBtb2RhbEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICBtb2RhbFRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW5Nb2RhbCgpO1xyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yIH0sIHByb2ZpbGVJbWFnZSkge1xyXG4gICAgdGhpcy5uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLmltYWdlID0gcHJvZmlsZUltYWdlO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCBuYW1lID0gdGhpcy5uYW1lLnRleHRDb250ZW50O1xyXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLmRlc2NyaXB0aW9uLnRleHRDb250ZW50O1xyXG4gICAgcmV0dXJuIHsgbmFtZSwgZGVzY3JpcHRpb24gfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gICAgdGhpcy5uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbWFnZSh7IGF2YXRhciB9KSB7XHJcbiAgICB0aGlzLmltYWdlLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XHJcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCwgbWV0aG9kID0gXCJhcHBlbmRcIikge1xyXG4gICAgY29uc3QgY2FyZCA9IHRoaXMucmVuZGVyZXIoZWxlbWVudCk7XHJcbiAgICB0aGlzLmNvbnRhaW5lclttZXRob2RdKGNhcmQpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3NPYmoiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJmb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JFYWNoIiwiaW5wdXQiLCJfYWRkSW5wdXRFdmVudHMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrVmFsaWRpdHkiLCJ0b2dnbGVTdWJtaXRCdXR0b24iLCJlcnJvckVsZW1lbnQiLCJuZXh0U2libGluZyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUVycm9yIiwiX3Nob3dFcnJvciIsInJlc2V0VmFsaWRhdGlvbiIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJyZW1vdmUiLCJfaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwic29tZSIsImlucHV0RWxlbWVudCIsIkNhcmQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZVRyYXNoQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJpbWFnZSIsImxpbmsiLCJ0ZXh0IiwibmFtZSIsImlkIiwiX2lkIiwiaXNMaWtlZCIsImNhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsIl9jYXJkRWxlbWVudCIsImNsb25lTm9kZSIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwiX2RlbGV0ZUJ1dHRvbiIsIl9saWtlQnV0dG9uIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NoZWNrZWRJZkxpa2VkIiwiX3JlbW92ZUNhcmQiLCJjcmVhdGVDYXJkIiwic3JjIiwiYWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwibW9kYWwiLCJjdXJyZW50SWQiLCJyZW1vdmVIYW5kbGVyIiwib3Blbk1vZGFsIiwiY2FyZE9iaiIsIl9oYW5kbGVDbG9zZUV2ZW50IiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGdW5jdGlvbiIsInN1cGVyIiwic3VibWl0IiwiaW5wdXRzIiwiYnV0dG9uIiwiYnV0dG9uVGV4dCIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJzZXRVcERlbGV0ZU1vZGFsIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXR2YWx1ZXMiLCJ2YWx1ZSIsInNldElucHV0cyIsImlucHV0VmFsdWVzIiwicHJldmVudERlZmF1bHQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImFwaSIsIm9wdGlvbnMiLCJfYXV0aG9yaXphdGlvbiIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJyZWplY3QiLCJzdGF0dXMiLCJkZXNjcmlwdGlvbiIsImFib3V0IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJ1cGRhdGVVc2VySW5mbyIsIl9yZWYiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZVVzZXJJbWFnZSIsIl9yZWYyIiwiYXZhdGFyIiwiZ2V0SW5pdGlhbENhcmRzIiwicG9zdENhcmQiLCJfcmVmMyIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsImRpc2xpa2VDYXJkIiwiZ2V0QWxsIiwiYWxsIiwiYmFzZVVybCIsInZhbGlkYXRpb25PYmoiLCJmb3JtU2VsZWN0b3IiLCJmaWVsZFNlbGVjdG9yIiwiZXJyb3JTZWxlY3RvciIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJwcm9maWxlSW1hZ2UiLCJlZGl0Rm9ybSIsImZvcm1zIiwiYWRkQ2FyZEZvcm0iLCJwcm9maWxlUGljRm9ybSIsIm1vZGFsSW1hZ2UiLCJtb2RhbFRpdGxlIiwicG9wdXBzIiwiY2FyZFBvcHVwIiwidGl0bGUiLCJjYXJkRGF0YSIsImNhcmRTZWN0aW9uIiwiYWRkSXRlbSIsInJlc2V0IiwiZm9ybVZhbGlkYXRvcnMiLCJjYXJkRm9ybVZhbGlkYXRpb24iLCJwcm9maWxlUG9wdXAiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiZGVsZXRlQ2FyZFBvcHVwIiwicHJvZmlsZVBpY1BvcHVwIiwic2V0VXNlckltYWdlIiwicGljRm9ybVZhbGlkYXRpb24iLCJsb2NhdGlvblBvcHVwIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsImNsYXNzU2VsZWN0b3IiLCJyZW5kZXJlciIsImNvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImNhcmQiLCJ0b2dnbGVMaWtlIiwiZWRpdEZvcm1WYWxpZGF0aW9uIiwicG9wdXAiXSwic291cmNlUm9vdCI6IiJ9